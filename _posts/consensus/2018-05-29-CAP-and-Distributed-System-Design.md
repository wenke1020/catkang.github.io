---                                                                                                                                      
layout: post
title: CAP理论与分布式系统设计
category: Consensus
tags: [Paxos, Raft，一致性，共识算法]
keywords: Paxos, Raft，一致性，共识算法
---

## **引言**

	在现代分布式系统中，节点数目是巨大的。在CAP理论的范围内，MichaelStoneBraker断言分区必然会发生，并且系统内发生节点失败的机会随着节点数的增加而呈指数增加：

    ![pic](https://github.com/wenke1020/wenke1020.github.io/blob/master/pic/%E5%85%AC%E5%BC%8F.webp)

    基于这样的事实，很多人会问：
    如果发生分区（故障），系统会牺牲什么？一致性还是可用性？
    
    对于这个问题，我有几个反问：
    发生分区这个假设在多大概率上会成立？哪些因素会造成分区？
    如果发生分区，一致性如何定义？应用需要什么样的一致性？
    如果发生分区，可用性如何定义？应用需要什么样的可用性？
    如果不发生分区，一致性和可用性又该如何取舍？

## **全球规模分布式系统**

    分布式系统是指联网的计算机通过消息传递来协调行为的系统。在这样的系统中机器之间并发执行，独立故障，并且没有全局状态和全局锁.
    随着互联网公司的全球化，为了保证服务质量和响应速度，各大互联网公司（Google,Amzon,Facebook,Alibaba等）纷纷在全球建立数据中心，部署服务和放置数据。为了提高可用性和响应速度，以及满足容灾等需求，这些系统都采用了复制技术。这就带来了服务和数据状态的全球范围内的数据复制和一致性问题。



